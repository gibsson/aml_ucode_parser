commit e6c53468ade19b4628356ffa72eb400d39e29d80
Author: yongchun.li <yongchun.li@amlogic.com>
Date:   Thu May 30 17:30:24 2019 -0700

    media: Media.mk remove the useless and misleading defines [1/1]
    
    PD#SWPL-8995
    
    Problem:
    1. Media definition CONFIG_AMLOGIC_MEDIA_GE2D and
    CONFIG_AMLOGIC_MEDIA_ENHANCEMENT_DOLBYVISION were defined from kernel config,
    the definitions here are useless,  misleading and potential casue mismatch.
    2. HEVC video encoder shale use the module control defined in Media.mk
    
    Solution:
    Remove those useless definitions,and HEVC encoder use
    CONFIG_AMLOGIC_MEDIA_VENC_H265 in make file intead hard code.
    
    Verify:
    U211
    
    Change-Id: I19c691ee4953cfd2e476a2f67da92cf416197bc9
    Signed-off-by: yongchun.li <yongchun.li@amlogic.com>

diff --git a/Media.mk b/Media.mk
index eba1e1e..8ca1d1d 100644
--- a/Media.mk
+++ b/Media.mk
@@ -20,9 +20,7 @@ CONFIGS := CONFIG_AMLOGIC_MEDIA_VDEC_MPEG12=m \
 	CONFIG_AMLOGIC_MEDIA_VDEC_AVS=m \
 	CONFIG_AMLOGIC_MEDIA_VDEC_AVS2=m \
 	CONFIG_AMLOGIC_MEDIA_VENC_H264=m \
-	CONFIG_AMLOGIC_MEDIA_VENC_H265=m \
-	CONFIG_AMLOGIC_MEDIA_ENHANCEMENT_DOLBYVISION=y
-        CONFIG_AMLOGIC_MEDIA_GE2D=y
+	CONFIG_AMLOGIC_MEDIA_VENC_H265=m
 
 define copy-media-modules
 $(foreach m, $(shell find $(strip $(1)) -name "*.ko"),\
diff --git a/drivers/frame_sink/encoder/h265/Makefile b/drivers/frame_sink/encoder/h265/Makefile
index e7414bf..833822c 100644
--- a/drivers/frame_sink/encoder/h265/Makefile
+++ b/drivers/frame_sink/encoder/h265/Makefile
@@ -1 +1 @@
-obj-m	+=	vpu.o
+obj-$(CONFIG_AMLOGIC_MEDIA_VENC_H265)	+=	vpu.o

commit 1e7f2e11bf79e9f47ad8430c2b18277eb50e7658
Author: Hui Zhang <hui.zhang@amlogic.com>
Date:   Wed Aug 21 16:48:23 2019 +0800

    Revert "vh265: fix h265 playback stutter issue  [1/1]"
    
    This reverts commit 4dac82134254e061cb40a23b856cd6896eea56c8.
    
    Change-Id: I60cf2f0f0ed7b3afa8f00a271e86dcd2318aaf6a

diff --git a/drivers/frame_provider/decoder/h265/vh265.c b/drivers/frame_provider/decoder/h265/vh265.c
index 0419ae0..b6108ec 100644
--- a/drivers/frame_provider/decoder/h265/vh265.c
+++ b/drivers/frame_provider/decoder/h265/vh265.c
@@ -6513,16 +6513,6 @@ static int hevc_slice_segment_header_process(struct hevc_state_s *hevc,
 				iPOCmsb = 0;
 			}
 			hevc->curr_POC = (iPOCmsb + iPOClsb);
-			if (hevc->curr_POC != INVALID_POC && hevc->curr_POC) {
-				if (((hevc->i_only & 0x4)  == 0) && (hevc->m_nalUnitType != NAL_UNIT_CODED_SLICE_IDR
-					&& hevc->m_nalUnitType != NAL_UNIT_CODED_SLICE_IDR_N_LP)
-					&& ((hevc->curr_POC + hevc->sps_num_reorder_pics_0) < hevc->iPrevPOC)) {
-					hevc_print(hevc, 0,
-					"Flush  .. num_reorder_pic %d  pic->POC %d  hevc->iPrevPOC %d\n",
-					hevc->sps_num_reorder_pics_0,hevc->curr_POC,hevc->iPrevPOC);
-					flush_output(hevc, get_pic_by_POC(hevc, hevc->curr_POC));
-				}
-			}
 			if ((hevc->m_temporalId - 1) == 0)
 				hevc->iPrevTid0POC = hevc->curr_POC;
 			else {
@@ -8159,7 +8149,6 @@ static int prepare_display_buf(struct hevc_state_s *hevc, struct PIC_s *pic)
 				__func__, vf->v4l_mem_handle);
 		}
 
-
 #ifdef MULTI_INSTANCE_SUPPORT
 		if (vdec_frame_based(hw_to_vdec(hevc))) {
 			vf->pts = pic->pts;

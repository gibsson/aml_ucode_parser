commit b455a12f601f986f5ade610376b69708978b417f
Author: Peng Yixin <yixin.peng@amlogic.com>
Date:   Thu Jun 27 11:11:41 2019 +0800

    media_module: fixed screen static when play PIP local content [1/1]
    
    PD#OTT-4677
    
    Problem:
    Multi-channel local playback of different format,
    one channel will stuck when seek another channel. The
    uncorrect ucode was loaded due to a logic problem, which
    caused playback stuck.
    
    Solution:
    The loading ucode logic was modified to
    solve this problem.
    When core->last_vdec=null, set vdec->mc_loaded = 0,
    the ucode will be loaded correctly.
    
    Verify:
    u212
    
    Change-Id: Ib9ec52329138b58410079ab0a801e03a6f471e5d
    Signed-off-by: Peng Yixin <yixin.peng@amlogic.com>

diff --git a/drivers/frame_provider/decoder/utils/vdec.c b/drivers/frame_provider/decoder/utils/vdec.c
index feb753e..44f0934 100644
--- a/drivers/frame_provider/decoder/utils/vdec.c
+++ b/drivers/frame_provider/decoder/utils/vdec.c
@@ -2945,7 +2945,8 @@ static int vdec_core_thread(void *data)
 				if ((core->last_vdec != vdec) &&
 					(core->last_vdec->mc_type != vdec->mc_type))
 					vdec->mc_loaded = 0;/*clear for reload firmware*/
-			}
+			} else
+				vdec->mc_loaded = 0;
 			core->last_vdec = vdec;
 			if (debug & 2)
 				vdec->mc_loaded = 0;/*alway reload firmware*/

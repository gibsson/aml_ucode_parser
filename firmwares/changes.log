commit d6df808decd7c572a91ca4802d468f385a49db58
Author: live.li <live.li@amlogic.com>
Date:   Sun May 5 15:28:50 2019 +0800

    decoder: avs: fix the pts invalid issue [1/2]
    
    PD#TV-5393
    
    Problem:
       avs give invalid pts to sync module
    
    Solution:
       change the avs pts value function
    
    Verify:
      x301
    
    Change-Id: I1886d1ae8b14348b0707e71b36087ab9571f2b2b
    Signed-off-by: live.li <live.li@amlogic.com>

diff --git a/drivers/frame_provider/decoder/avs/avs.c b/drivers/frame_provider/decoder/avs/avs.c
index ae50ec2..a12c06a 100644
--- a/drivers/frame_provider/decoder/avs/avs.c
+++ b/drivers/frame_provider/decoder/avs/avs.c
@@ -580,6 +580,7 @@ static void vavs_isr(void)
 				pr_info("buffer_index %d, canvas addr %x\n",
 					   buffer_index, vf->canvas0Addr);
 			}
+			 vf->pts = (pts_valid)?pts:0;
 			vf->pts_us64 = (pts_valid) ? pts_us64 : 0;
 			vfbuf_use[buffer_index]++;
 			vf->mem_handle =
@@ -712,11 +713,14 @@ static void vavs_isr(void)
 			vf->canvas0Addr = vf->canvas1Addr =
 				index2canvas(buffer_index);
 			vf->type_original = vf->type;
-
+			vf->pts = (pts_valid)?pts:0;
 			vf->pts_us64 = (pts_valid) ? pts_us64 : 0;
 			if (debug_flag & AVS_DEBUG_PRINT) {
 				pr_info("buffer_index %d, canvas addr %x\n",
-					   buffer_index, vf->canvas0Addr);
+					   buffer_index, vf->canvas0Addr
+					   );
+			 pr_info("PicType = %d, PTS = 0x%x\n",
+				picture_type, vf->pts);
 			}
 
 			vfbuf_use[buffer_index]++;

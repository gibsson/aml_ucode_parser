commit 460b57949687329d5074e64f55dd47d1cef6093e
Author: Nanxin Qin <nanxin.qin@amlogic.com>
Date:   Wed Mar 13 16:07:11 2019 +0800

    decode: fixd the bug of the vdec add frame. [1/2]
    
    PD#SWPL-4597
    
    Problem:
    1. Probabilistic full-screen display mosaic after seek 8K H265
    2. the wrong of the write point caused to flush cache area is error.
    
    Solution:
    corrected the error of flush cache range.
    
    Verify:
    X301
    
    Change-Id: I946a488329d02bc21f40546ac7185818e3f2f3ff
    Signed-off-by: Nanxin Qin <nanxin.qin@amlogic.com>

diff --git a/drivers/frame_provider/decoder/utils/vdec_input.c b/drivers/frame_provider/decoder/utils/vdec_input.c
index d70b4aa..f571bcf 100644
--- a/drivers/frame_provider/decoder/utils/vdec_input.c
+++ b/drivers/frame_provider/decoder/utils/vdec_input.c
@@ -72,10 +72,8 @@ static int copy_from_user_to_phyaddr(void *virts, const char __user *buf,
 		if (copy_from_user(p, buf, size))
 			return -EFAULT;
 
-		if (pading) {
-			p += size;
-			memset(p, 0, pading);
-		}
+		if (pading)
+			memset(p + size, 0, pading);
 
 		codec_mm_dma_flush(p, size + pading, DMA_TO_DEVICE);
 

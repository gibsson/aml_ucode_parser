commit 9350c90877a21e496d3d89434c623997285cffe0
Author: Hui Zhang <hui.zhang@amlogic.com>
Date:   Tue Jul 16 17:05:03 2019 +0800

    vmh264: fix video quality issue [1/1]
    
    PD#SWPL-10667
    
    Problem:
    force di cause bad video qulity for some progressive
    source.
    
    Solution:
    add more condition constraint force di
    
    Verify:
    x301
    
    Change-Id: I77125e3a086905c36127c922e112c442e61a3a15
    Signed-off-by: Hui Zhang <hui.zhang@amlogic.com>

diff --git a/drivers/frame_provider/decoder/h264_multi/vmh264.c b/drivers/frame_provider/decoder/h264_multi/vmh264.c
index 6b871fa..1166a70 100644
--- a/drivers/frame_provider/decoder/h264_multi/vmh264.c
+++ b/drivers/frame_provider/decoder/h264_multi/vmh264.c
@@ -2390,6 +2390,7 @@ static int check_force_interlace(struct vdec_h264_hw_s *hw,
 	}
 
 	if ((dec_control & DEC_CONTROL_FLAG_FORCE_2997_1080P_INTERLACE)
+		&& hw->bitstream_restriction_flag
 		&& (hw->frame_width == 1920)
 		&& (hw->frame_height >= 1080)
 		&& (hw->frame_dur == 3203 || hw->frame_dur == 3840)) {

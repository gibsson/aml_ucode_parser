commit 6fa5ee3290930fcab9647f187d0d21d4c06b915a
Author: Peng Yixin <yixin.peng@amlogic.com>
Date:   Fri Apr 26 17:09:21 2019 +0800

    media: fix some KASAN bug: [1/1]
    
    PD#SWPL-7788
    
    Problem:
    KASAN detected some "global-out-of-bounds" bug.
    
    Solution:
    Fixed these bug.
    
    Verify:
    Verified X301
    
    Change-Id: Ic5b945f8fd5a9fbab7a08d2aa61061b152940d72
    Signed-off-by: Peng Yixin <yixin.peng@amlogic.com>

diff --git a/drivers/frame_provider/decoder/h264_multi/vmh264.c b/drivers/frame_provider/decoder/h264_multi/vmh264.c
index 08d5421..10f2c19 100644
--- a/drivers/frame_provider/decoder/h264_multi/vmh264.c
+++ b/drivers/frame_provider/decoder/h264_multi/vmh264.c
@@ -2745,7 +2745,8 @@ void print_pic_info(int decindex, const char *info,
 		info,
 		picture_structure_name[pic->structure],
 		pic->coded_frame ? "Frame" : "Field",
-		(slice_type < 0) ? "" : slice_type_name[slice_type],
+		(slice_type < 0 ||
+		slice_type >= (sizeof(slice_type_name) / sizeof(slice_type_name[0]))) ? "" : slice_type_name[slice_type],
 		pic->mb_aff_frame_flag,
 		pic->poc,
 		pic->pic_num,
